package com.portfolio.controller;

import java.util.ArrayList;

import org.hibernate.mapping.List;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

import com.portfolio.entity.Curso_Complementar;
import com.portfolio.entity.Formacao;
import com.portfolio.entity.Sobre;
import com.portfolio.service.Curso_ComplementarService;
import com.portfolio.service.FormacaoService;
import com.portfolio.service.SobreService;

@Controller
@RequestMapping("/index")
public class ControllerVisitante {

	@Autowired
	private SobreService sobreService;
	
	@Autowired
	private FormacaoService formacaoService;
	
	@Autowired 
	private Curso_ComplementarService cursosService;
	
	@GetMapping
	public ModelAndView home() {
		
		Sobre sobre = sobreService.obter(1L);
		
		ArrayList<Formacao> formacao = (ArrayList<Formacao>) formacaoService.listar();
		
		ArrayList<Curso_Complementar> cursos = cursosService.listar();
		
		ModelAndView modelAndView = new ModelAndView("index")
				.addObject("sobre", sobre)
				.addObject("formacoes", formacao)
				.addObject("cursos", cursos);
		return modelAndView;
	}

}
